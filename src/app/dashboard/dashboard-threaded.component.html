<div class="row">
    <div class="col-12">
        <div *ngIf="!hasCompany&&!alert1Closed">
            <p>
                <ngb-alert type="info" (close)="alert1Closed=true">
                    You are not yet linked to a company.<br/>
                    You can register your company now.
                </ngb-alert>
            </p>
        </div>
        <p *ngIf="roles.indexOf('initial_representative')!=-1&&roles.indexOf('legal_representative')==-1&&!alert2Closed">
            <ngb-alert type="info" (close)="alert2Closed=true">
                Your company is now registered.<br/>
                You can start publishing your catalogue.<br/>
                In order to execute business processes your company needs to be verified by an administrator - please stay tuned.<br/>
                If you are not being verified with 24h, please contact our support nimble-support@salzburgresearch.at.
            </ngb-alert>
        </p>
        <div class="nimble-col">
            <span i18n>Welcome to the</span> NIMBLE <span i18n>platform,</span> {{fullName}}!<br/>
            <i>
                <small>Collaborative Network for Industry, Manufacturing, Business and Logistics in Europe.</small>
            </i>
        </div>
    </div>
</div>

<div class="row space-before">
    <div class="col-12">
        <h3 i18n>Dashboard</h3>
    </div>
</div>

<div class="row space-before">
    <div class="col">
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a href id="salesTab"
                   [ngClass]="{'nav-link': true, active: qp_collaborationRole == COLLABORATION_ROLE_SELLER}"
                   (click)="onTabClick($event)"
                   i18n
                >Sales</a>
            </li>

            <li class="nav-item">
                <a href id="purchasesTab"
                   [ngClass]="{'nav-link': true, active: qp_collaborationRole == COLLABORATION_ROLE_BUYER}"
                   (click)="onTabClick($event)"
                   i18n
                >Purchases</a>
            </li>
        </ul>
    </div>
</div>

<ng-container *ngIf="groups.length > 0">
    <div class="row space-before">
        <div class="col-3">
            <span i18n>Showing results</span> {{ start }} - {{ end }} <span i18n>of</span> {{ size }}
        </div>
        <div class="pagination col-9 justify-content-center ">
            <ngb-pagination [(collectionSize)]="size" [(pageSize)]="pageSize" [(page)]="qp_page" [maxSize]="limit" [boundaryLinks]="false"
                            (pageChange)="paginationHandler()"></ngb-pagination>
        </div>
    </div>
</ng-container>

<div class="row"
     [ngClass]="{'space-before' : groups.length == 0}">

    <div *ngIf="filterSet" class="col-2">
        <facet [title]="'Archived'"
               [dataType]="'boolean'"
               [booleanValue]="qp_archived"
               (booleanValueChanged)="qp_archived = $event;"
               (triggerCriteriaChanged)="filterChangeHandler();">
        </facet>
        <facet [title]="'Product'"
               [dataType]="'string'"
               [stringValues]="filterSet.relatedProducts"
               [selectedStringValues]="modifiedFilterSet.relatedProducts"
               (triggerCriteriaChanged)="filterChangeHandler();">
        </facet>
        <facet [title]="'Product category'"
               [dataType]="'string'"
               [stringValues]="filterSet.relatedProductCategories"
               [selectedStringValues]="modifiedFilterSet.relatedProductCategories"
               (triggerCriteriaChanged)="filterChangeHandler();">
        </facet>
        <facet [title]="'Trading partner'"
               [dataType]="'string'"
               [stringValues]="filterSet.tradingPartnerNames"
               [selectedStringValues]="modifiedFilterSet.tradingPartnerNames"
               (triggerCriteriaChanged)="filterChangeHandler();">
        </facet>
    </div>
    <call-status *ngIf="!filterSet" class="col-2" [callStatus]="filterQueryStatus"></call-status>

    <div *ngIf="groups.length == 0" class="space-after">
        <span i18n>No data</span>
    </div>
    <div *ngIf="groups.length > 0" class="col-10">
        <thread-summary *ngFor="let processInstanceGroup of groups"
                        [processInstanceGroup]="processInstanceGroup"
                        (threadStateUpdated)="paginationHandler()">
        </thread-summary>
    </div>
</div>