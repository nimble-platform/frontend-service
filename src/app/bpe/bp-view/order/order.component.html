<ng-container *ngIf="order">
    <div class="well">
        <h5 class="mt-3 mb-3">Price/Requested Quantity</h5>
        <!-- Price Amount -->
        <amount-view [presentationMode]="presentationMode"
                     [propName]="'Price for Base Quantity'"
                     [definition]="'The price of the product requested for the base quantity'"
                     [amount]="[order.orderLine[0].lineItem.price.priceAmount]">
        </amount-view>

        <!-- Price Base Quantity -->
        <quantity-view [presentationMode]="presentationMode"
                       [propName]="'Price Base Quantity'"
                       [propName]="'Base Quantity'"
                       [definition]="'The base quantity for which a price is a specified.\nFor example, charging €5,00 for a base quantity of 1m2 indicates the total price of 3m2 product is charged with €15,00.\nExample:i.e.,Quantity:1,Unit:m2.'"
                       [quantity]="[order.orderLine[0].lineItem.price.baseQuantity]">
        </quantity-view>

        <quantity-view [propName]="'Requested Quantity'"
                       [quantity]="[order.orderLine[0].lineItem.quantity]"
                       [definition]="'The requested quantity of the product'"
                       [presentationMode]="presentationMode">
        </quantity-view>

        <!-- Total Price -->
        <quantity-value-view
                *ngIf="order.orderLine[0].lineItem.price.baseQuantity.unitCode == order.orderLine[0].lineItem.quantity.unitCode && order.orderLine[0].lineItem.price.baseQuantity.value"
                [propName]="'Total Price'"
                [definition]="'Total price for the requested quantity'"
                [value]="order.orderLine[0].lineItem.price.priceAmount.value * order.orderLine[0].lineItem.quantity.value / order.orderLine[0].lineItem.price.baseQuantity.value"
                (onValueChanged)="updateTotalPrice($event, order.orderLine[0].lineItem.price.priceAmount.currencyID);"
                [unitType]="'Currency'"
                [unit]="order.orderLine[0].lineItem.price.priceAmount.currencyID">
        </quantity-value-view>
    </div>

    <div class="well">
        <h5 class="mt-3 mb-3">Delivery Terms</h5>
        <!-- Request delivery period -->
        <quantity-view [presentationMode]="presentationMode"
                       [propName]="'Requested Delivery Period'"
                       [type]="'time_quantity'"
                       [definition]="'The period requested for delivery.It starts after the order confirmation.For example,Quantity:2,Unit:weeks'"
                       [quantity]="[order.orderLine[0].lineItem.delivery[0].requestedDeliveryPeriod.durationMeasure]">
        </quantity-view>

        <!-- Delivery Location -->
        <!-- bpDataService.processMetadata == null is required to visualize the address already set for the order-->
        <detailed-address-view  [propName]="'Delivery Location'"
                        [presentationMode]="presentationMode"
                        [deliveryAddress]="order.orderLine[0].lineItem.deliveryTerms.deliveryLocation.address"
                        [fetchDefaultDeliveryAddress]="bpDataService.processMetadata == null && bpDataService.previousProcess == null">
        </detailed-address-view>
    </div>

    <div class="well">
        <h5 class="mt-3 mb-3">Payment Means</h5>
        <div *ngIf="presentationMode == 'edit'"
             class="input-group form-group border-0">
            <label class="col-3">Payment Means
                <span class="label label-default" title="Expected means of payment">
                    &#9432;
            </span>
            </label>
            <select class="custom-select form-control" [(ngModel)]="order.paymentMeans.paymentMeansCode.value">
                <option></option>
                <option>Credit Card</option>
                <option>ACH Transfer</option>
                <option>Wire Transfer</option>
                <option>Cash On Delivery</option>
            </select>
        </div>
        <div *ngIf="presentationMode != 'edit'"
             class="input-group form-group border-0">
            <label class="col-3">Payment Means
                <span class="label label-default" title="Expected means of payment">
                    &#9432;
            </span>
            </label>
            <input class="form-control"
                   type="text"
                   [(ngModel)]="order.paymentMeans.paymentMeansCode.value"
                   readonly>
        </div>
    </div>

    <payment-terms-view [tradingTerms]="order.paymentTerms.tradingTerms"
                        [presentationMode]="presentationMode"
                        (onSelectChange)="generateOrderTermsAndConditionsAsText()">
    </payment-terms-view>

    <div class="well">
        <h5 class="mt-3 mb-3">Order Terms and Conditions</h5>
        <textarea class="form-control mb-2"
                  rows="6"
                  style="margin-left: 15px"
                  [(ngModel)]="orderTermsAndConditions"
                  readonly>
        </textarea>
    </div>

    <!--<ng-container *ngIf="bpDataService.userRole == 'buyer' && bpDataService.processMetadata == null">-->
        <!--<hr>-->

        <!--<div class=" d-flex">-->
            <!--<label class="col-3">-->
                <!--Data Monitoring Service-->
                <!--<span class="label label-default" title="'Data monitoring service for the production process of the ordered product'">-->
                <!--&#9432;-->
                <!--</span>-->
            <!--</label>-->
            <!--<button type="button"-->
                    <!--class="col btn mr-2"-->
                    <!--[ngClass]="{'btn-outline-warning active': !dmsBtnClicked, 'alert-warning': dmsBtnClicked}"-->
                    <!--(click)="dmsBtnClicked = true; addDataMonitoringClause()"-->
                    <!--[disabled]="dmsBtnClicked">-->
                <!--<span *ngIf="!dmsBtnClicked">Demand data monitoring service</span>-->
                <!--<span *ngIf="dmsBtnClicked">Data monitoring clause has been added to the order contract</span>-->
            <!--</button>-->
            <!--<button *ngIf="dmsBtnClicked"-->
                    <!--class="btn btn-xs btn-danger alert-danger"-->
                    <!--(click)="dmsBtnClicked = false; removeDataMonitoringClause()">×-->
            <!--</button>-->
        <!--</div>-->
    <!--</ng-container>-->

    <ng-container *ngIf="order.contract && order.contract[0]?.clause.length > 0">
        <div class="well">
            <h5 class="mt-3 mb-3">Contract
                <span class="label label-default" title="Contract contains clauses driven by the collaboration performed so far">
                &#9432;
            </span>
            </h5>
            <contract [contract]="order.contract[0]">
            </contract>
        </div>
    </ng-container>

    <value-view [presentationMode]="presentationMode"
                [propName]="'Order Note'"
                [(value)]="order.note">
    </value-view>

    <ng-container *ngIf="bpDataService.userRole == 'buyer' && bpDataService.processMetadata == null">
        <hr>
        <div class="d-flex justify-content-end">
            <button [disabled]="submitted"
                    class="btn btn-success" (click)="sendOrder()">Send Order
            </button>
        </div>
    </ng-container>

</ng-container>
<call-status [callStatus]="callStatus"
             [large]="true">
</call-status>
