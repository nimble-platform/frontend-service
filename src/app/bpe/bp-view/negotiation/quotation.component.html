<ng-container *ngIf="quotation">
    <ng-container *ngIf="bpDataService.getCatalogueLine().goodsItem.item.transportationServiceDetails == null">
        <negotiation-trading-details [lineItem]="quotation.quotationLine[0].lineItem"
                                     [fetchDefaultDeliveryAddress]="bpDataService.processMetadata == null && bpDataService.previousProcess == null"
                                     [presentationMode]="presentationMode">
        </negotiation-trading-details>

        <div class="well">
            <h5 class="mb-3">Data Monitoring Service</h5>
            <ng-container *ngIf="bpDataService.processMetadata?.processStatus == 'Started' && requestForQuotation?.dataMonitoringRequested">
                <label>The customer requested data monitoring service</label>
                <hr>
                <div class="input-group">
                    <button class="btn btn-warning col-3"
                            (click)="quotation.dataMonitoringPromised = !quotation.dataMonitoringPromised">Promise service request &nbsp;
                        <span class="label label-default"
                              title="'Promise for provision of data monitoring service for the production process of the ordered product'">
                            &#9432;
                        </span>
                    </button>

                    <input class="ml-3" type="checkbox"
                           [(ngModel)]="quotation.dataMonitoringPromised">
                </div>
            </ng-container>

            <boolean-view *ngIf="bpDataService.processMetadata?.processStatus == 'Completed' || parentElement == 'clause'"
                          [presentationMode]="'singlevalue'"
                          [propName]="'Service Promise Indicator'"
                          [definition]="'Promise for provision of data monitoring service for the production process of the ordered product'"
                          [value]="quotation.dataMonitoringPromised">
            </boolean-view>
        </div>
    </ng-container>

    <!-- negotiation parameters for transportation services -->
    <ng-container *ngIf="bpDataService.getCatalogueLine().goodsItem.item.transportationServiceDetails != null">
        <transport-trading-details [lineItem]="quotation.requestForQuotationLine[0].lineItem"
                                   [fetchDefaultDeliveryAddress]="bpDataService.processMetadata == null"
                                   [presentationMode]="presentationMode">
        </transport-trading-details>

        <div class="well">
            <h6>Handling Unit Details</h6>
            <value-view [presentationMode]="presentationMode"
                        [propName]="'Transport Handling Unit'"
                        [definition]="'The transport handling unit used'"
                        [(value)]="quotation.quotationLine[0].lineItem.delivery[0].shipment.transportHandlingUnit[0].transportHandlingUnitTypeCode.name">

            </value-view>

            <quantity-view [presentationMode]="presentationMode"
                           [propName]="quotation.quotationLine[0].lineItem.delivery[0].shipment.transportHandlingUnit[0].measurementDimension[0].attributeID"
                           [quantity]="[quotation.quotationLine[0].lineItem.delivery[0].shipment.transportHandlingUnit[0].measurementDimension[0].measure]">
            </quantity-view>

            <quantity-view [presentationMode]="presentationMode"
                           [propName]="quotation.quotationLine[0].lineItem.delivery[0].shipment.transportHandlingUnit[0].measurementDimension[1].attributeID"
                           [quantity]="[quotation.quotationLine[0].lineItem.delivery[0].shipment.transportHandlingUnit[0].measurementDimension[1].measure]">
            </quantity-view>
        </div>

        <div class="well">
            <h6>Consolidated Shipment</h6>
            <value-view [presentationMode]="presentationMode"
                        [propName]="'Goods Item'"
                        [definition]="'A goods item included in this shipment'"
                        [(value)]="quotation.quotationLine[0].lineItem.delivery[0].shipment.goodsItem[0].item.name">

            </value-view>

            <quantity-view [propName]="'Quantity'"
                           [quantity]="[quotation.quotationLine[0].lineItem.delivery[0].shipment.totalTransportHandlingUnitQuantity]"
                           [presentationMode]="presentationMode">
            </quantity-view>

            <quantity-view [presentationMode]="presentationMode"
                           [propName]="'Gross Volume Measure'"
                           [definition]="'The total volume of the goods in this shipment, including packaging,e.g.,Quantity:78,Unit:MTQ'"
                           [quantity]="[quotation.quotationLine[0].lineItem.delivery[0].shipment.consignment[0].grossVolumeMeasure]">
            </quantity-view>

            <quantity-view [presentationMode]="presentationMode"
                           [propName]="'Gross Weight Measure'"
                           [definition]="'The total gross weight of a shipment; the weight of the goods plus packaging plus transport equipment,e.g.,Quantity:12,Unit:KGM'"
                           [quantity]="[quotation.quotationLine[0].lineItem.delivery[0].shipment.consignment[0].grossWeightMeasure]">
            </quantity-view>
        </div>
    </ng-container>

    <hr>

    <div class="input-group form-group">
        <label class="col-3 control-label">Response</label>
        <select class="custom-select"
                [(ngModel)]="quotation.documentStatusCode.name"
                [disabled]="parentElement == 'clause' || bpDataService.processMetadata.processStatus != 'Started'">
            <option>Accepted</option>
            <option>Terms Updated</option>
            <option>Rejected</option>
        </select>
    </div>

    <value-view [presentationMode]="presentationMode"
                [propName]="'Response Reason'"
                [(value)]="quotation.documentStatusReasonCode.name">
    </value-view>

    <value-view [presentationMode]="presentationMode"
                [propName]="'Note'"
                [(value)]="quotation.note[0]">
    </value-view>

    <div *ngIf="parentElement == 'business_process'" class="d-flex justify-content-end">
        <ng-container *ngIf="bpDataService.userRole == 'seller'">
            <button *ngIf="bpDataService.processMetadata.processStatus == 'Started'"
                    class="btn btn-success" [disabled]="submitted"
                    (click)="respondToRFQ()">Send Quotation
            </button>
        </ng-container>
    </div>
</ng-container>

<call-status [callStatus]="callStatus"
             [large]="true">
</call-status>